# å†œäº§å“ä»·æ ¼ç›‘æ§ç³»ç»Ÿ - å¯è§†åŒ–ç®¡ç†é¢æ¿

## æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº Docker å’Œ Portainer çš„å¯è§†åŒ–ç®¡ç†é¢æ¿ï¼Œä¸ºå†œäº§å“ä»·æ ¼ç›‘æ§ç³»ç»Ÿæä¾›ç»Ÿä¸€çš„ç®¡ç†ç•Œé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ  ç®¡ç†é¢æ¿ (ç«¯å£ 8080)
- **ç»Ÿä¸€ç®¡ç†ç•Œé¢**: é›†æˆæ‰€æœ‰ç³»ç»Ÿç»„ä»¶çš„è®¿é—®å…¥å£
- **å®æ—¶çŠ¶æ€ç›‘æ§**: æ˜¾ç¤ºAPIæœåŠ¡ã€è°ƒåº¦å™¨ã€æ•°æ®åº“ç­‰çŠ¶æ€
- **å¿«é€Ÿè®¿é—®**: ä¸€é”®è·³è½¬åˆ°å„ä¸ªå­ç³»ç»Ÿ
- **ç³»ç»Ÿä¿¡æ¯**: æ˜¾ç¤ºè¿è¡Œæ—¶é—´ã€ç‰ˆæœ¬ä¿¡æ¯ç­‰

### ğŸ³ Portainer (ç«¯å£ 9000)
- **å®¹å™¨ç®¡ç†**: å¯è§†åŒ–ç®¡ç†Dockerå®¹å™¨
- **é•œåƒç®¡ç†**: æŸ¥çœ‹ã€åˆ é™¤ã€æ„å»ºDockeré•œåƒ
- **ç½‘ç»œç®¡ç†**: ç®¡ç†Dockerç½‘ç»œé…ç½®
- **å·ç®¡ç†**: ç®¡ç†æ•°æ®å·å’Œå­˜å‚¨
- **æ—¥å¿—æŸ¥çœ‹**: å®æ—¶æŸ¥çœ‹å®¹å™¨æ—¥å¿—
- **èµ„æºç›‘æ§**: ç›‘æ§CPUã€å†…å­˜ä½¿ç”¨æƒ…å†µ

### ğŸ“ˆ æ•°æ®é¢æ¿ (ç«¯å£ 8000/static/)
- **ä»·æ ¼æ•°æ®å±•ç¤º**: å†œäº§å“ä»·æ ¼æ•°æ®å¯è§†åŒ–
- **å›¾è¡¨åˆ†æ**: ä»·æ ¼è¶‹åŠ¿å›¾è¡¨
- **æ•°æ®ç­›é€‰**: æŒ‰çœä»½ã€å“ç§ã€å¸‚åœºç­›é€‰
- **å®æ—¶æ›´æ–°**: è‡ªåŠ¨åˆ·æ–°æœ€æ–°æ•°æ®

### ğŸ“š APIæ–‡æ¡£ (ç«¯å£ 8000/docs)
- **æ¥å£æ–‡æ¡£**: å®Œæ•´çš„APIæ¥å£è¯´æ˜
- **åœ¨çº¿æµ‹è¯•**: ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•API
- **å‚æ•°è¯´æ˜**: è¯¦ç»†çš„è¯·æ±‚å‚æ•°å’Œå“åº”æ ¼å¼

## å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šWindows æ‰¹å¤„ç†æ–‡ä»¶
```bash
# åŒå‡»è¿è¡Œæˆ–åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ
start-dashboard.bat
```

### æ–¹å¼äºŒï¼šPowerShell è„šæœ¬ (Windows)
```powershell
# åœ¨PowerShellä¸­æ‰§è¡Œ
.\start-dashboard.ps1
```

### æ–¹å¼ä¸‰ï¼šShellè„šæœ¬ (Linux/Mac)
```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x start-dashboard.sh

# è¿è¡Œè„šæœ¬
./start-dashboard.sh
```

### æ–¹å¼å››ï¼šæ‰‹åŠ¨å¯åŠ¨
```bash
# 1. è®¾ç½®Portainerå¯†ç 
echo "admin123456" > portainer_password

# 2. åˆ›å»ºå¿…è¦ç›®å½•
mkdir -p data logs reports backups
mkdir -p grafana/provisioning/dashboards
mkdir -p grafana/provisioning/datasources

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d market-api scheduler portainer dashboard
```

## è®¿é—®åœ°å€

å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®å„ä¸ªç»„ä»¶ï¼š

| ç»„ä»¶ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| ç®¡ç†é¢æ¿ | http://localhost:8080 | ä¸»è¦ç®¡ç†ç•Œé¢ |
| æ•°æ®é¢æ¿ | http://localhost:8000/static/ | ä»·æ ¼æ•°æ®å±•ç¤º |
| APIæ–‡æ¡£ | http://localhost:8000/docs | æ¥å£æ–‡æ¡£ |
| Portainer | http://localhost:9000 | Dockerç®¡ç† |

## é»˜è®¤è´¦æˆ·

| æœåŠ¡ | ç”¨æˆ·å | å¯†ç  | è¯´æ˜ |
|------|--------|------|------|
| Portainer | admin | admin123456 | é¦–æ¬¡ç™»å½•åè¯·ä¿®æ”¹ |

## ç›®å½•ç»“æ„

```
â”œâ”€â”€ dashboard/                 # ç®¡ç†é¢æ¿å‰ç«¯æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html            # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ css/                  # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/                   # JavaScriptæ–‡ä»¶
â”‚   â”œâ”€â”€ 404.html              # 404é”™è¯¯é¡µé¢
â”‚   â””â”€â”€ 50x.html              # æœåŠ¡å™¨é”™è¯¯é¡µé¢
â”œâ”€â”€ docker-compose.yml        # Dockerç¼–æ’æ–‡ä»¶
â”œâ”€â”€ Dockerfile.dashboard      # Dashboardé•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ nginx-dashboard.conf      # Nginxé…ç½®æ–‡ä»¶
â”œâ”€â”€ start-dashboard.sh        # Linux/Macå¯åŠ¨è„šæœ¬
â”œâ”€â”€ start-dashboard.bat       # Windowså¯åŠ¨è„šæœ¬
â””â”€â”€ DASHBOARD_README.md       # æœ¬æ–‡æ¡£
```

## ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
docker-compose ps
```

### æŸ¥çœ‹æœåŠ¡æ—¥å¿—
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f market-api
docker-compose logs -f portainer
docker-compose logs -f dashboard
```

### é‡å¯æœåŠ¡
```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose restart

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose restart market-api
```

### åœæ­¢æœåŠ¡
```bash
docker-compose down
```

### æ›´æ–°æœåŠ¡
```bash
# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build
```

## æ•…éšœæ’é™¤

### 1. ç«¯å£å†²çª
å¦‚æœé‡åˆ°ç«¯å£å†²çªï¼Œå¯ä»¥ä¿®æ”¹ `docker-compose.yml` ä¸­çš„ç«¯å£æ˜ å°„ï¼š
```yaml
ports:
  - "8081:8080"  # å°†8080æ”¹ä¸º8081
```

### 2. æœåŠ¡å¯åŠ¨å¤±è´¥
æ£€æŸ¥Dockeræ˜¯å¦æ­£å¸¸è¿è¡Œï¼š
```bash
docker info
```

æŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯ï¼š
```bash
docker-compose logs
```

### 3. æ— æ³•è®¿é—®æœåŠ¡
æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼Œç¡®ä¿ç›¸å…³ç«¯å£å·²å¼€æ”¾ï¼š
- 8080 (ç®¡ç†é¢æ¿)
- 8000 (APIæœåŠ¡)
- 9000 (Portainer)

### 4. Portaineræ— æ³•è¿æ¥Docker
ç¡®ä¿Docker socketå·²æ­£ç¡®æŒ‚è½½ï¼š
```yaml
volumes:
  - /var/run/docker.sock:/var/run/docker.sock
```

## å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **: é¦–æ¬¡ç™»å½•Portaineråç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç 
2. **ç½‘ç»œå®‰å…¨**: åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®é…ç½®é˜²ç«å¢™é™åˆ¶è®¿é—®
3. **SSLè¯ä¹¦**: ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®HTTPS
4. **å®šæœŸå¤‡ä»½**: å®šæœŸå¤‡ä»½é‡è¦æ•°æ®å’Œé…ç½®æ–‡ä»¶

## è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹ç®¡ç†é¢æ¿æ ·å¼
ç¼–è¾‘ `dashboard/css/dashboard.css` æ–‡ä»¶æ¥è‡ªå®šä¹‰æ ·å¼ã€‚

### æ·»åŠ æ–°åŠŸèƒ½
åœ¨ `dashboard/js/dashboard.js` ä¸­æ·»åŠ æ–°çš„JavaScriptåŠŸèƒ½ã€‚

### ä¿®æ”¹Nginxé…ç½®
ç¼–è¾‘ `nginx-dashboard.conf` æ¥è°ƒæ•´åå‘ä»£ç†è®¾ç½®ã€‚

## æŠ€æœ¯æ ˆ

- **å‰ç«¯**: HTML5, CSS3, JavaScript, Bootstrap 5
- **åç«¯**: FastAPI, Python
- **å®¹å™¨åŒ–**: Docker, Docker Compose
- **åå‘ä»£ç†**: Nginx
- **å®¹å™¨ç®¡ç†**: Portainer
- **ç›‘æ§**: Prometheus, Grafana (å¯é€‰)

## æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Dockerå’ŒDocker Composeç‰ˆæœ¬
2. ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
3. ç½‘ç»œè¿æ¥çŠ¶æ€
4. æ—¥å¿—æ–‡ä»¶ä¸­çš„é”™è¯¯ä¿¡æ¯

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- é›†æˆPortainer Dockerç®¡ç†
- ç»Ÿä¸€ç®¡ç†é¢æ¿ç•Œé¢
- åŸºç¡€ç›‘æ§åŠŸèƒ½
